var footware = {
                    "footware_1" : {
                                    "name": "Puma TX-3 Sneakers",
                                    "imgsrc": "../images/tx-3-car1.jpeg",
                                    "mrp": 2999,
                                    "selling_price": 1666,
                                    "delivery": 35,
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "footware",
                                    "filters": { 
                                        "gender" : "men",
                                        "price" : "1000-2999",
                                        "brand" : "puma"
                                        },
                                    "productId": "puma_tx_31",
                                    "carousel_images": ["tx-3-car1","tx-3-car2","tx-3-car3","tx-3-car4","tx-3-car5","tx-3-car6"]
                                },
                    "footware_2" : {
                                    "name": "Puma K9000 Xc Dp Sandals",
                                    "imgsrc": "../images/puma1.jpeg",
                                    "mrp": 2499,
                                    "selling_price": 2499,
                                    "delivery": "Free",
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "footware",
                                    "filters": { 
                                        "gender" : "men",
                                        "price" : "1000-2999",
                                        "brand" : "puma"
                                        },
                                    "productId": "puma_tx_32",
                                    "carousel_images": ["puma1","puma2","puma3","puma4","puma5","puma6"]
                                },
                    "footware_3" : {
                                    "name": "Nell Boots",
                                    "imgsrc": "../images/nell1.jpeg",
                                    "mrp": 2285,
                                    "selling_price": 1140,
                                    "delivery": 50,
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "footware",
                                    "filters": { 
                                        "gender" : "women",
                                        "price" : "1000-2999",
                                        "brand" : "nell"
                                        },
                                    "productId": "puma_tx_33",
                                    "carousel_images": ["nell1","nell2","nell3","nell4"]
                                },
                    "footware_4" : {
                                    "name": "Steve Madden Stecy Heels",
                                    "imgsrc": "../images/steve1.jpeg",
                                    "mrp": 5999,
                                    "selling_price": 4787,
                                    "delivery": 20,
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "footware",
                                    "filters": { 
                                        "gender" : "women",
                                        "price" : ">3000",
                                        "brand" : "Steve"
                                        },
                                    "productId": "puma_tx_34",
                                    "carousel_images": ["steve1","steve2"]
                                },
                    "footware_5" : {
                                    "name": "Skechers Go Walk 2 - Flash Sports Shoes",
                                    "imgsrc": "../images/sketchers1.jpeg",
                                    "mrp": 3499,
                                    "selling_price": 1579,
                                    "delivery": "Free",
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "footware",
                                    "filters": { 
                                        "gender" : "kids",
                                        "price" : "1000-2999",
                                        "brand" : "Sketchers"
                                        },
                                    "productId": "puma_tx_35",
                                    "carousel_images": ["sketchers1","sketchers2","sketchers3","sketchers4","sketchers5","sketchers6"]
                                }
                };
var electronics = {
                "electronics_1" : {
                                    "name": "Lenovo K3 Note",
                                    "imgsrc": "../images/k3-note1.jpeg",
                                    "mrp": 9999,
                                    "selling_price": 9999,
                                    "delivery": "Free",
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "electronics",
                                    "filters": {
                                        "type": "mobile", 
                                        "price" : ">3000",
                                        "brand" : "Lenevo"
                                    },
                                    "productId": "k3_note_1",
                                    "carousel_images": ["k3-note1","k3-note2","k3-note3","k3-note4","k3-note5","k3-note6"]
                                },
                "electronics_2" : {
                                    "name": "Moto G (3rd Generation)",
                                    "imgsrc": "../images/motog1.jpeg",
                                    "mrp": 12999,
                                    "selling_price": 12999,
                                    "delivery": 15,
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "electronics",
                                    "filters": {
                                        "type": "mobile", 
                                        "price" : ">3000",
                                        "brand" : "Motorola"
                                    },
                                    "productId": "k3_note_2",
                                    "carousel_images": ["motog1","motog2","motog3"]
                                },
                "electronics_3" : {
                                    "name": "Honor Holly",
                                    "imgsrc": "../images/honor1.jpeg",
                                    "mrp": 6999,
                                    "selling_price": 5999,
                                    "delivery": "Free",
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "electronics",
                                    "filters": {
                                        "type": "mobile", 
                                        "price" : ">3000",
                                        "brand" : "Huawae"
                                    },
                                    "productId": "k3_note_3",
                                    "carousel_images": ["honor1","honor2","honor3","honor4","honor5"]
                                },
                "electronics_4" : {
                                    "name": "Mi Pad",
                                    "imgsrc": "../images/mipad1.jpeg",
                                    "mrp": 12999,
                                    "selling_price": 12999,
                                    "delivery": "Free",
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "electronics",
                                    "filters": {
                                        "type": "tablet", 
                                        "price" : ">3000",
                                        "brand" : "Xiaomi"
                                    },
                                    "productId": "k3_note_4",
                                    "carousel_images": ["mipad1","mipad2","mipad3","mipad4","mipad5"]
                                },
                "electronics_5" : {
                                    "name": "Dell Inspiron 3558 ",
                                    "imgsrc": "../images/dell1.jpeg",
                                    "mrp": 32790,
                                    "selling_price": 32790,
                                    "delivery": 150,
                                    "colors": [
                                        "#A52A2A"
                                    ],
                                    "category": "electronics",
                                    "filters": {
                                        "type": "laptop", 
                                        "price" : ">3000",
                                        "brand" : "puma"
                                    },
                                    "productId": "k3_note_5",
                                    "carousel_images": ["dell1","dell2","dell3","dell4"]
                                }
};
var clothing = {
                "clothing_1" : {
                                "name": "Miraan Cotton Printed Salwar Suit Dupatta Material",
                                "imgsrc": "../images/salwar-dupatta.jpeg",
                                "mrp": 2549,
                                "selling_price": 568,
                                "delivery": "Free",
                                "colors": [
                                    "#fdfd11"
                                ],
                                "category": "clothing",
                                "filters": { 
                                        "gender" : "women",
                                        "price" : "500-999",
                                        "brand" : "Miraan"
                                        },
                                "productId": "salwar_1",
                                "carousel_images": ["salwar-dupatta"]
                            },
                "clothing_2" : {
                                "name": "Zovi Printed Men's Round Neck T-Shirt",
                                "imgsrc": "../images/zovi1.jpeg",
                                "mrp": 499,
                                "selling_price": 420,
                                "delivery": "Free",
                                "colors": [
                                    "#fdfd11"
                                ],
                                "category": "clothing",
                                "filters": { 
                                        "gender" : "men",
                                        "price" : "0-499",
                                        "brand" : "Zovi"
                                        },
                                "productId": "tees1",
                                "carousel_images": ["zovi1","zovi2","zovi3","zovi4"]
                            },
                "clothing_3" : {
                                "name": "Uber Urban Regular Fit Men's Jeans",
                                "imgsrc": "../images/uber-jeans1.jpeg",
                                "mrp": 1499,
                                "selling_price": 549,
                                "delivery": 20,
                                "colors": [
                                    "#fdfd11"
                                ],
                                "category": "clothing",
                                "filters": { 
                                        "gender" : "men",
                                        "price" : "500-999",
                                        "brand" : "Uber"
                                        },
                                "productId": "salwar_3",
                                "carousel_images": ["uber-jeans1"]
                            },
                "clothing_4" : {
                                "name": "Gas Slim Fit Women's Jeans",
                                "imgsrc": "../images/gas1.jpeg",
                                "mrp":  6990,
                                "selling_price": 4194,
                                "delivery": "Free",
                                "colors": [
                                    "#fdfd11"
                                ],
                                "category": "clothing",
                                "filters": { 
                                        "gender" : "women",
                                        "price" : ">3000",
                                        "brand" : "Gas"
                                        },
                                "productId": "gas_jeans",
                                "carousel_images": ["gas1","gas2","gas3"]
                            },
                "clothing_5" : {
                                "name": "Kabeer Boy's Shirt, Waistcoat and Pant Set",
                                "imgsrc": "../images/kabeer1.jpeg",
                                "mrp": 800,
                                "selling_price": 750,
                                "delivery": 42,
                                "colors": [
                                    "#fdfd11"
                                ],
                                "category": "clothing",
                                "filters": { 
                                        "gender" : "kids",
                                        "price" : "500-999",
                                        "brand" : "Kabeer"
                                        },
                                "productId": "salwar_5",
                                "carousel_images": ["kabeer1","kabeer2","kabeer3"]
                            }
};
var books = {
                "book_1" : {
                            "name": "Poirot (English)",
                            "imgsrc": "../images/poirot.jpeg",
                            "mrp": 199,
                            "selling_price": 169,
                            "delivery": 25,
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "english",
                                "price" : "0-499",
                                "brand" : "others"
                            },
                            "productId": "book_1",
                            "carousel_images": ["poirot"]
                        },
                "book_2" : {
                            "name": "Heroes of Olympus : The House of Hades (English)",
                            "imgsrc": "../images/olympus.jpeg",
                            "mrp": 499,
                            "selling_price": 399,
                            "delivery": "Free",
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "english",
                                "price" : "500-999",
                                "brand" : "others"
                            },
                            "productId": "book_2",
                            "carousel_images": ["olympus"]
                        },
                "book_3" : {
                            "name": "Rahasya (Hindi Of The Secret)",
                            "imgsrc": "../images/secret.jpeg",
                            "mrp": 325,
                            "selling_price": 242,
                            "delivery": 30,
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "hindi",
                                "price" : "0-499",
                                "brand" : "others"
                            },
                            "productId": "book_3",
                            "carousel_images": ["secret"]
                        },
                "book_4" : {
                            "name": "Ikshvaku Ke Vanshaj (Hindi)",
                            "imgsrc": "../images/vanshaj.jpeg",
                            "mrp": 295,
                            "selling_price": 266,
                            "delivery": "Free",
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "hindi",
                                "price" : "0-499",
                                "brand" : "others"
                            },
                            "productId": "book_4",
                            "carousel_images": ["vanshaj"]
                        },
                "book_5" : {
                            "name": "Life of Mahatma Gandhi, The (English)",
                            "imgsrc": "../images/gandhi.jpeg",
                            "mrp": 599,
                            "selling_price": 450,
                            "delivery": 15,
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "english",
                                "price" : "0-499",
                                "brand" : "others"
                            },
                            "productId": "book_5",
                            "carousel_images": ["gandhi"]
                        },
                "book_6" : {
                            "name": "Bhagavad Gita (Telugu)",
                            "imgsrc": "../images/gita.jpeg",
                            "mrp": 480,
                            "selling_price": 199,
                            "delivery": 20,
                            "colors": [],
                            "category": "books",
                            "filters": {
                                "language" : "telugu",
                                "price" : "0-499",
                                "brand" : "others"
                            },
                            "productId": "book_6",
                            "carousel_images": ["gita"]
                        }
};
$(document).ready(function() {
	$.ajax({
		url: "http://localhost:8080/ShoppingCart/SignInDisplay", 
		async:true, 
		success: function(isLoggedin){
			console.log(isLoggedin.trim());
			if(isLoggedin.trim() === "yes"){
				$("#signin").hide();
				$("#logout,#welcome").show();
			}
			else{
				$("#signin").show();
				$("#logout,#welcome").hide();
			}
		}
	});
    var query = window.location.search.substring(1);
    var pair = query.split("=")[1];

    for(var key in footware){
        if(footware[key]["productId"] == pair){
            catalog_category = footware[key];
        }
    }
    for(var key in electronics){
        if(electronics[key]["productId"] == pair){
            catalog_category = electronics[key];
        }
    }
    for(var key in clothing){
        if(clothing[key]["productId"] == pair){
            catalog_category = clothing[key];
        }
    }
    for(var key in books){
        if(books[key]["productId"] == pair){
            catalog_category = books[key];
        }
    }
//    productDescription(catalog_category);
    function productDescription(catalog_category) {
        var toAppend = "";
        toAppend += '<div class="slickOuterCarousel lazy">\
        <div class="carousel slide article-slide" id="article-photo-carousel" data-ride="carousel" data-interval="false">\
                            <!-- Wrapper for slides -->\
                            <div class="carousel-inner cont-slider">';
                            for(i=0; i< catalog_category["carousel_images"].length;i++) {
                                if(i==0) {
                                    toAppend += '<div class="item active">\
                                        <img alt="" title="" src="../images/'+catalog_category["carousel_images"][i]+'.jpeg">\
                                    </div>';
                                }
                                else {
                                    toAppend += '<div class="item">\
                                        <img alt="" title="" src="../images/'+catalog_category["carousel_images"][i]+'.jpeg">\
                                    </div>';
                                }
                            }
                                
                            toAppend += '</div>\
                            <!-- Indicators -->\
                            <ol class="carousel-indicators">';
                            for(i=0; i< catalog_category["carousel_images"].length;i++) {
                                if(i==0) {
                                    toAppend += '<li class="active" data-slide-to="0" data-target="#article-photo-carousel">\
                                        <img alt="" src="../images/'+catalog_category["carousel_images"][i]+'.jpeg">\
                                    </li>';
                                }
                                else {
                                    toAppend += '<li data-slide-to="0" data-target="#article-photo-carousel">\
                                        <img alt="" src="../images/'+catalog_category["carousel_images"][i]+'.jpeg">\
                                    </li>';
                                }
                            }
                            toAppend += '</ol>\
                            <a class="carousel-control left " href="#article-photo-carousel" data-slide="prev">\
                                <span class="glyphicon glyphicon-chevron-left"></span>\
                            </a>\
                            <a class="carousel-control right" href="#article-photo-carousel" data-slide="next">\
                                <span class="glyphicon glyphicon-chevron-right"></span>\
                            </a>\
                        </div>\
                </div>';
                $("#product-title").append(catalog_category["name"]);
                $(".product_details_sidebar .price").append('<div class="col-xs-12">\
                            <h3 class="text-primary">Price</h3>\
                            <p>MRP: <del style="color:red">Rs.'+catalog_category["mrp"]+'</del></p>\
                            <p>Selling Price: <span style="color:green;font-size:25px">Rs.'+catalog_category["selling_price"]+'</span></p>\
                        </div>')

        $(".product-description_carousel").append(toAppend);
        $('#product-brand').append(catalog_category["filters"]["brand"]);
        $('#product-gender').append(catalog_category["filters"]["gender"]);
    }

        $('.slickOuterCarousel').slick({
            infinite: false,
            arrows:false,
            dots:true,
            speed: 500,
            slidesToShow: 1,
            slidesToScroll: 1,
            responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1

                    }
                }, {
                    breakpoint: 800,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1

                    }
                }, {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }
                // You can unslick at a given breakpoint now by adding:
                // settings: "unslick"
                // instead of a settings object
            ]
        });

    $('.slickOuterCarousel .carousel').carousel({
          wrap: false
        }).on('slid.bs.carousel', function () {
            var $this=$(this);
            var curSlide = $this.find($('.active'));
            var left=$this.find($('.glyphicon-chevron-left'));
            var right=$this.find($('.glyphicon-chevron-right'));
          if(curSlide.is( ':first-child' )) {

             left.removeClass('special');
          }
          else
            {
                left.addClass('special');
            }
          if (curSlide.is( ':last-child' )) {
             right.addClass('special');
          }
          else
            {
                right.removeClass('special');
            }
        });
        
        // For Shopping Cart
        var cart_items = JSON.parse(localStorage.getItem("cart_item")) || [];
        
        $('#addtocart').click(function(){
                cart_items.push(catalog_category);
                console.log(cart_items);
                localStorage.setItem('cart_item', JSON.stringify(cart_items));
            
        });        
});
